# 숨쉬기 앱 PRD (Product Requirements Document) - v1.2 (사용자 제어)

## 📋 프로젝트 개요

**앱 이름**: 3-3-7 호흡 (Breathe Easy)
**번들 ID**: `com.breatheasy.app`
**플랫폼**: Flutter (iOS 프로토타입)
**목적**: 3초 들이쉬기 - 3초 멈추기 - 7초 내쉬기 호흡법을 통한 스트레스 완화 및 명상 도움

## 🎯 핵심 기능 (단일 화면 구성)

### 1. 수동 시작/정지 제어

- 사용자가 '시작' 버튼을 눌러 호흡 세션을 직접 시작
- '정지' 버튼을 통해 언제든지 세션을 중단하고 초기 상태로 복귀

### 2. 통합 호흡 가이드 화면

#### 2.1 시각적 가이드

- **애니메이션**: 수위(Water Level) 스타일의 애니메이션이 화면 하단에서부터 차오르고 내려가며 호흡 주기를 시각적으로 표현
- **색상 변화**: 호흡 단계(들이쉬기, 멈추기, 내쉬기)에 따라 배경 색상이 동적으로 변경
- **상태 표시**: 원 중앙에 현재 호흡 단계를 텍스트로 표시 ("들이쉬기", "멈추기", "내쉬기")
- **숫자 카운트다운**: 각 호흡 단계의 남은 시간을 숫자로 명확하게 표시하여 사용자의 집중을 도움

#### 2.2 햅틱 피드백

- **호흡 전환**: 각 단계(들이쉬기→멈추기→내쉬기)로 전환될 때마다 가벼운 진동 피드백

#### 2.3 TTS 음성 가이드

- **시작/정지 안내**: "3-3-7 호흡을 시작합니다.", "호흡을 멈춥니다."
- **단계 안내**: 각 호흡 단계의 이름을 음성으로 안내 ("들이쉬기", "멈추기", "내쉬기")

#### 2.4 화면 잠금 방지

- 호흡 세션이 진행되는 동안 화면이 자동으로 꺼지지 않음

## 🛠️ 기술 요구사항

### Flutter 패키지

```yaml
dependencies:
  flutter_tts: ^3.8.3        # TTS 구현 (한국어 지원 ko-KR)
  haptic_feedback: ^0.4.2  # 네이티브 햅틱 피드백
  wakelock_plus: ^1.2.0    # 화면 꺼짐 방지 (안정화 버전)
```

### 핵심 구현 요소

- **AnimationController**: 수위 애니메이션 및 색상 변화 관리
- **StatefulWidget**: 단일 화면의 모든 상태(애니메이션, 세션 상태) 관리
- **위젯 분리**: UI를 기능별(애니메이션, 텍스트, 버튼)로 분리하여 코드 구조 개선

## 📱 화면 구성 (단일 화면)

```
┌─────────────────────┐
│                     │
│                     │
│      들이쉬기        ���
│         3           │
│                     │
│                     │
│ █ █ █ █ █ █ █ █ █ █ │ (수위 애니메이션)
│ █ █ █ █ █ █ █ █ █ █ │
│                     │
│        (시작)        │ (원형 버튼)
└─────────────────────┘
```

## 🚀 개발 계획 (단순화)

1.  **Phase 1: 단일 화면 MVP 구현 (완료)**
    - [x] 기본 UI 레이아웃 및 수동 제어 기능
    - [x] 3-3-7 타이밍 기반 수위 애니메이션 및 숫자 카운트다운
    - [x] TTS, 햅틱, 화면 잠금 방지 기능 통합
    - [x] 코드 리팩토링 (위젯 분리)

2.  **Phase 2: 완성도 향상**
    - [ ] 앱 아이콘 및 스플래시 스크린 추가
    - [ ] 안정성 테스트 및 버그 수정

## ✅ 성공 지표

- **직관성**: 명확한 시작/정지 버튼과 숫자 카운트로 쉬운 사용성 제공
- **정확성**: 정확한 3-3-7 타이밍 유지
- **몰입감**: 시각, 청각, 촉각을 통한 완전한 가이드
- **안정성**: 시뮬레이터 및 실제 기기에서 크래시 없는 안정적인 동작

## 🎨 디자인 원칙

- **미니멀리즘**: 불필요한 요소 제거, 호흡에만 집중
- **사용자 주도**: 사용자가 원할 때 기능을 시작하고 멈출 수 있는 제어권 제공
- **편안함**: 눈에 피로하지 않은 색상과 부드러운 애니메이션